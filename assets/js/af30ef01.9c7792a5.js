"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1439],{4176:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"how-to/sharing-data","title":"Sharing data across modules","description":"Modules have been designed with data and sharing at its core.","source":"@site/docs/how-to/sharing-data.md","sourceDirName":"how-to","slug":"/how-to/sharing-data","permalink":"/ModularPipelines/docs/how-to/sharing-data","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Sharing data across modules","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Execution and Dependencies","permalink":"/ModularPipelines/docs/how-to/execution-and-dependencies"},"next":{"title":"Run conditions","permalink":"/ModularPipelines/docs/how-to/run-conditions"}}');var a=t(4848),l=t(8453);const o={title:"Sharing data across modules",sidebar_position:4},r="Sharing data across modules",i={},d=[{value:"Handling Different Outcomes",id:"handling-different-outcomes",level:2},{value:"Using Match Helper",id:"using-match-helper",level:2},{value:"Convenience Properties",id:"convenience-properties",level:2},{value:"Important: Declare Dependencies",id:"important-declare-dependencies",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"sharing-data-across-modules",children:"Sharing data across modules"})}),"\n",(0,a.jsx)(n.p,{children:"Modules have been designed with data and sharing at its core."}),"\n",(0,a.jsxs)(n.p,{children:["When a module returns data in its ",(0,a.jsx)(n.code,{children:"ExecuteAsync"})," method, that data is available to be seen by other modules."]}),"\n",(0,a.jsxs)(n.p,{children:["Call ",(0,a.jsx)(n.code,{children:"await context.GetModule<TModule>()"})," from within your module to access another module's result."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"[DependsOn<BuildModule>]\npublic class DeployModule : Module<DeployResult>\n{\n    protected override async Task<DeployResult?> ExecuteAsync(\n        IModuleContext context, CancellationToken cancellationToken)\n    {\n        // Get the build module's result\n        var buildResult = await context.GetModule<BuildModule>();\n\n        // Access the value safely\n        var artifact = buildResult.ValueOrDefault?.ArtifactPath;\n\n        return await Deploy(artifact);\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"handling-different-outcomes",children:"Handling Different Outcomes"}),"\n",(0,a.jsx)(n.p,{children:"Module results are a discriminated union with three possible states: Success, Failure, or Skipped. Use pattern matching to handle each case:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"var result = await context.GetModule<MyModule>();\n\n// Pattern matching (recommended)\nreturn result switch\n{\n    ModuleResult<MyResult>.Success { Value: var value }\n        => await ProcessValue(value),\n    ModuleResult.Failure { Exception: var ex }\n        => HandleFailure(ex),\n    ModuleResult.Skipped { Decision: var skip }\n        => HandleSkipped(skip.Reason),\n    _ => null\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"using-match-helper",children:"Using Match Helper"}),"\n",(0,a.jsxs)(n.p,{children:["For exhaustive handling, use the ",(0,a.jsx)(n.code,{children:"Match"})," method:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"var result = await context.GetModule<MyModule>();\n\nreturn result.Match(\n    onSuccess: value => Process(value),\n    onFailure: ex => HandleError(ex),\n    onSkipped: skip => HandleSkip(skip)\n);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"convenience-properties",children:"Convenience Properties"}),"\n",(0,a.jsx)(n.p,{children:"For simpler checks, use the convenience properties:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"var result = await context.GetModule<MyModule>();\n\n// Quick status checks\nif (result.IsSuccess)\n{\n    var value = result.ValueOrDefault;\n    // Process value\n}\n\nif (result.IsFailure)\n{\n    var exception = result.ExceptionOrDefault;\n    // Handle error\n}\n\nif (result.IsSkipped)\n{\n    var skipDecision = result.SkipDecisionOrDefault;\n    // Handle skip\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"important-declare-dependencies",children:"Important: Declare Dependencies"}),"\n",(0,a.jsxs)(n.p,{children:["Always declare dependencies using ",(0,a.jsx)(n.code,{children:"[DependsOn<T>]"})," to ensure the dependent module has completed before you call ",(0,a.jsx)(n.code,{children:"GetModule"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"[DependsOn<BuildModule>]  // Ensures BuildModule completes first\n[DependsOn<TestModule>]   // Ensures TestModule completes first\npublic class DeployModule : Module<DeployResult>\n{\n    protected override async Task<DeployResult?> ExecuteAsync(\n        IModuleContext context, CancellationToken cancellationToken)\n    {\n        // Safe to call - dependencies are guaranteed to be complete\n        var build = await context.GetModule<BuildModule>();\n        var tests = await context.GetModule<TestModule>();\n\n        // ...\n    }\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(6540);const a={},l=s.createContext(a);function o(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);
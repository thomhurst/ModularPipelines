"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[8219],{7178:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"how-to/skipping","title":"Skipping Modules","description":"Using ModuleConfiguration","source":"@site/docs/how-to/skipping.md","sourceDirName":"how-to","slug":"/how-to/skipping","permalink":"/ModularPipelines/docs/how-to/skipping","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Skipping Modules","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Retry Policies","permalink":"/ModularPipelines/docs/how-to/retry-policy"},"next":{"title":"Logging","permalink":"/ModularPipelines/docs/how-to/logging"}}');var t=i(4848),s=i(8453);const r={title:"Skipping Modules",sidebar_position:7},l="Skipping Modules",a={},d=[{value:"Using ModuleConfiguration",id:"using-moduleconfiguration",level:2},{value:"Simple Boolean Condition",id:"simple-boolean-condition",level:3},{value:"Using Pipeline Context",id:"using-pipeline-context",level:3},{value:"With Skip Reason",id:"with-skip-reason",level:3},{value:"Async Skip Conditions",id:"async-skip-conditions",level:3},{value:"Combining with Other Behaviors",id:"combining-with-other-behaviors",level:2},{value:"History",id:"history",level:2},{value:"Run Conditions",id:"run-conditions",level:2},{value:"Categories",id:"categories",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"skipping-modules",children:"Skipping Modules"})}),"\n",(0,t.jsx)(n.h2,{id:"using-moduleconfiguration",children:"Using ModuleConfiguration"}),"\n",(0,t.jsxs)(n.p,{children:["The recommended way to configure module skipping is through the ",(0,t.jsx)(n.code,{children:"Configure()"})," method with the fluent builder API:"]}),"\n",(0,t.jsx)(n.h3,{id:"simple-boolean-condition",children:"Simple Boolean Condition"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class MyModule : Module<CommandResult>\n{\n    protected override ModuleConfiguration Configure() => ModuleConfiguration.Create()\n        .WithSkipWhen(() => Environment.GetEnvironmentVariable("SKIP_MODULE") == "true")\n        .Build();\n\n    protected override async Task<CommandResult?> ExecuteAsync(IModuleContext context, CancellationToken cancellationToken)\n    {\n        // Module logic here\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"using-pipeline-context",children:"Using Pipeline Context"}),"\n",(0,t.jsx)(n.p,{children:"When you need access to the pipeline context for your skip condition:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class MyModule : Module<CommandResult>\n{\n    protected override ModuleConfiguration Configure() => ModuleConfiguration.Create()\n        .WithSkipWhen(ctx => ctx.Git().Information.BranchName != "main")\n        .Build();\n\n    protected override async Task<CommandResult?> ExecuteAsync(IModuleContext context, CancellationToken cancellationToken)\n    {\n        // This only runs on the main branch\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"with-skip-reason",children:"With Skip Reason"}),"\n",(0,t.jsxs)(n.p,{children:["For better reporting, you can return a ",(0,t.jsx)(n.code,{children:"SkipDecision"})," with a reason:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class MyModule : Module<CommandResult>\n{\n    protected override ModuleConfiguration Configure() => ModuleConfiguration.Create()\n        .WithSkipWhen(ctx =>\n        {\n            if (ctx.Git().Information.BranchName == "main")\n            {\n                return SkipDecision.DoNotSkip;\n            }\n            return SkipDecision.Skip("This should only run on the main branch");\n        })\n        .Build();\n\n    protected override async Task<CommandResult?> ExecuteAsync(IModuleContext context, CancellationToken cancellationToken)\n    {\n        // Module logic here\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"async-skip-conditions",children:"Async Skip Conditions"}),"\n",(0,t.jsx)(n.p,{children:"For conditions that require async operations:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class MyModule : Module<CommandResult>\n{\n    protected override ModuleConfiguration Configure() => ModuleConfiguration.Create()\n        .WithSkipWhen(async () =>\n        {\n            var response = await HttpClient.GetAsync("https://api.example.com/should-run");\n            return !response.IsSuccessStatusCode;\n        })\n        .Build();\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"combining-with-other-behaviors",children:"Combining with Other Behaviors"}),"\n",(0,t.jsx)(n.p,{children:"You can combine skip conditions with other module behaviors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class CleanupModule : Module<CommandResult>\n{\n    protected override ModuleConfiguration Configure() => ModuleConfiguration.Create()\n        .WithSkipWhen(ctx => ctx.Git().Information.BranchName != "main")\n        .WithAlwaysRun()  // Run even if dependencies fail (when not skipped)\n        .WithTimeout(TimeSpan.FromMinutes(5))\n        .Build();\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"history",children:"History"}),"\n",(0,t.jsxs)(n.p,{children:["If a module was skipped, you can attempt to find its history from a previous run. See ",(0,t.jsx)(n.a,{href:"storing-and-retrieving-results",children:"History"})]}),"\n",(0,t.jsx)(n.h2,{id:"run-conditions",children:"Run Conditions"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"run-conditions",children:"Run Conditions"})]}),"\n",(0,t.jsx)(n.h2,{id:"categories",children:"Categories"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"categories",children:"Categories"})]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var o=i(6540);const t={},s=o.createContext(t);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);